# IPFS for reduction of chain size in Ethereum

This repo holds the code and data for the conference paper entitled 'IPFS for reduction of chain size in Ethereum'. This includes the dataset, the scraper used to create the dataset and the code used to create all the stats and graphs shown in the paper.

## Dataset
The dataset can be found in the json file entitled 'ctx_list_partial.json'. The data is structured as follows: Transaction ID (string), Block number (int), bytecode (string), contract id (string), block contract was last used in (int).

## Scraper
The scraper used to generate the dataset is 'scraper.rb'. It is written in Ruby and makes use of the 'nokogiri' gem.

## Graphs and stats
The graphs and stats for the paper were produced using Python3. The three files entitled 'distributions.py', 'values.py' and 'contract_dist.py'. Some figures are output to the stdout. The produced graphs are also included as png files.

## Latency tests
Two ruby scripts are responsible for the latency tests. 'testFileGen.rb' generates files of random data when passed two integers: number of files to create and size in bytes. After generating the files the script adds them to IPFS (expects IPFS node to already be running). It then sends the list of IPFS hashes generated to the server that is to be used to retrieve the files. The user will need to put their own SSH entry in the code. Its partner file 'retrivalTimer.rb' uses the text file generated by 'testFileGen.rb' which contains one IPFS hash per line. It requests each file from in turn and outputs the time taken to recieve it to stdout.